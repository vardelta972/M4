{"path":"iCloudDrive/bks/Algebra/Algebra/Sequences and Recurrence - MDB.pdf","text":"Mathematical Database Page 1 of 19 SEQUENCES AND RECURRENCE RELATIONS 1. Introduction Our very first experience with sequences probably came along with the following type of ‘numerical reasoning’ puzzles, in which one is asked to fill in a missing number among a chain of numbers, such as 1, 4, 7, 10, _____, … No doubt the ‘model answer’ would be 13, for each term exceeds the previous one by 3. The fact that ‘each term exceeds the previous one by 3’ is an example of a recurrence relation, in which each term has a certain relation with the previous term(s), and such a chain of numbers is called a sequence. Of course, one may argue that by replacing 13 with any other number, the answer is still valid because we can always describe some kind of relations between the terms. In fact, it is known that by filling in the blank with any number, we can find a ‘formula’ which gives the sequence when one plugs in 1, 2, 3, 4, … into the formula. For instance, with the formula 32n − , one gets the sequence 1, 4, 7, 10, 13, … when plugging in n = 1, 2, 3, 4, 5, … By a method called Lagrange interpolation, we can actually find formulas in the form of polynomials which give sequences like 1, 4, 7, 10, 14 or with the fifth term replaced by any other number. Such a formula is said to give a general term for the sequence. Despite this argument, such ‘numerical reasoning’ puzzles are not completely ‘useless’, in the sense that many mathematical discoveries actually come across such a process. Suppose a mathematician wants to investigate the relationship between two quantities x and y. He finds that when x = 1, 2, 3, 4, y is equal to 1, 4, 7, 10 respectively. Then a natural guess would be 32yx= − , and one tries to come up with a proof after that. In this set of notes, we shall first go over some examples to motivate our discussion. Then we will look at some familiar sequences, before we go into the discussion of how the general term can be obtained from a given recurrence relation. Mathematical Database Page 2 of 19 2. Examples for Motivation In this section, we shall look at various examples which serve to motivate our further discussions. Example 2.1. A piece of paper is 1 unit thick. By folding into half, the thickness becomes 2 units. Folding into half again, its thickness becomes 4 units, and so on. (a) What is the thickness of the paper after it is folded 10 times? (b) What is the thickness of the paper after it is folded 2004 times? Solution. (a) When it is folded 3 times, the thickness becomes 8 units. Similarly, when folded 4, 5, 6 times, the thickness becomes 16, 32 and 64 units respectively. You notice that each time the paper is folded, its thickness doubles, so you just multiply the thickness by 2 each time. Continuing in the same way, it is easy to get the answer, namely, when folded 10 times, the thickness will become 1024 units. (b) Here the situation is different. You probably don’t want to do the multiplication more than 2000 times and give the answer in a long chain of digits. Instead you want to look for ways which will enable you to write the answer in a nice form. You observe that the thicknesses 2, 4, 8, 16, etc. are actually powers of 2. Indeed, it is not difficult to see that after n folds, the thickness would be 2n units. Hence the answer to this part would be 20042. In the above example, if we let na be the thickness of the paper when it is folded n times, then the two parts would be asking for the values of 10a and 2004a respectively. The value of 10a may be calculated directly, but that of 2004a presumably cannot. To compute 10a we actually list out the values of 1a , 2a , 3a , … In this way we obtain a sequence of numbers. We also observed that each time the paper is folded, its thickness doubles. In other words, 1 2nnaa+ = . This formula, which relates a term in the sequence with previous term(s), is known as a recurrence relation for the sequence. The fact that the initial thickness is 1 unit may be expressed as 0 1a = . This is known as an initial condition. With the initial condition and the recurrence relation, we are able to compute na for small n. For large n, as we mentioned, the computation will be clumsy and we want to write down the value of na neatly. So we make the observation that 2n na = , and with this, all terms can be written down nicely as a power of 2. Such a formula is known as a general term of the sequence, which Mathematical Database Page 3 of 19 expresses the n-th term in terms of n (and independent of the previous terms of the sequence, unlike in the recurrence relation). Next we look at a similar example. Example 2.2. There is a circle and some diameters are drawn, splitting the circle into a number of sectors. (a) If 10 diameters are drawn, how many sectors are obtained? (b) If 2004 diameters are drawn, how many sectors are obtained? Solution. We let na be the number of sectors formed when n diameters are drawn. Again we are to find the values of 10a and 2004a . We find out the values of na for small n by experiment, as follows: From the figure, we see that 1 2a = , 2 4a = , 3 6a = and 4 8a = . We also observe that, by adding an additional diameter, two of the existing sectors will each be split into two, thus giving two more sectors. In this way, we can establish the recurrence relation 1 2nnaa+ =+ . From the initial conditions and the recurrence relation obtained, we easily get the general term 2nan= . Hence the answers to (a) and (b) are 20 and 4008 respectively. In the above example, the general term 2nan= is quite easy to find. Sometimes the general term may not be so explicit, and we need some good observation. Example 2.3. Observe the following pattern. n = 1 n = 2 n = 3 n = 4 Mathematical Database Page 4 of 19 3 3 3 3 3 11 35 2 79 11 3 13 15 17 19 4 100 = += ++ = ++ + = = M (a) How many ‘+’ signs should there be in the box? (b) What are the smallest and largest integers in the box? Solution. (a) The number of ‘+’ signs in the first five rows are 0, 1, 2, 3, 4 respectively. Hence, if na denotes the number of ‘+’ signs in the n-th row, then we would have 1nan=− , so that the number of ‘+’ signs in the 100th row is 100 100 1 99a = −= . (b) Let nb and nc denote respectively the smallest and largest integers on the left hand side of the n-th row. Then we are to find 100b and 100c . If we can find the general term for nb and nc , then everything would be easy. Note that for n = 1, 2, 3, 4, 5, nb is equal to 1, 3, 7, 13, 21 respectively. How can we find an expression for nb in terms of n? This may not be easy. Well, if we subtract 1 from each term, the sequence will become 0, 2, 6, 12, 20, … This is more evident, for they are 01× , 12× , 23× , 34× and 45× respectively. In this way, we see that ( 1) 1nbn n= −+ , so the smallest integer in the box is 100 100 (100 1) 1 9901b =× − + = . Now to find the general term for nc is easy, for the smallest integer on the left hand side of the (1)n + st row is 1nb + , so 2 1 2( 1) 1 2 1nncb n n n n+=− = + + − = + −. In particular, the largest integer in the box is 2 100 100 100 1 10099c =+ − = . In the previous example we found the general term by an ingenious observation. In the next example we look at a situation in which the general term is to be obtained by calculation. Example 2.4. There is a circle and we are going to draw some straight lines to split the circle into a number of regions. (a) If 10 straight lines are drawn, what is the largest number of regions obtained? (b) If 2004 straight lines are drawn, what is the largest number of regions obtained? Mathematical Database Page 5 of 19 Solution. As before we let na be the largest number of regions formed when n straight lines are drawn. We find out the values of na for small n by experiment, as follows: From the figure, we see that 1 2a = , 2 4a = , 3 7a = and 4 11a = . From the figure, we see that 1 2a = , 2 4a = , 3 7a = and 4 11a = . From the course of the experiment, we find that, in order to obtain the largest number of regions: (1) No three lines should be concurrent. (2) No two lines should be parallel. (3) The intersection of two lines should lie in the interior of the circle. Now, suppose n lines have already been drawn, dividing the circle into na regions. In order to obtain the largest number of regions after adding the ( 1)n + st line, the new line should intersect each of the n previously drawn lines in the interior of the circle, and this will add 1n + regions. Hence, we obtain the recurrence relation 1 1nnaa n+ = ++ . As 1 2a = , we obtain 1 2 (1) 2 234 ( 1) 1(1 2 3 ) nn n aa n an n nn n − − =+ =+ − + = =+ + + + + − + =+ + + + + L L L Of course, we have the well-known formula (1) 12 3 2 nn n + ++ + + =L . Consequently, the answer to part (a) is 10 10 11 156 2 a × = += while the answer to part (b) is 2004 2004 2005 1 2009011 2 a × =+ = . n = 1 n = 2 n = 3 n = 4 Mathematical Database Page 6 of 19 In the previous example we managed to compute the general term of the sequence. This is sometimes not easy, as the following example shows. Example 2.5. A staircase consists of n steps. A boy walks from the bottom to the top, each time climbing 1 or 2 steps. (a) If n = 10, what is the number of ways in which he can climb up the stairs? (b) If n = 2004, what is the number of ways in which he can climb up the stairs? Solution. Let na be the number of ways to climb up a stairs of n steps with each time climbing 1 or 2 steps. We are to compute 10a and 2004a . To climb n steps, we may first climb 1 or 2 steps. In the former case, we are to climb 1n − more steps, and this can be done in 1na − ways. In the latter case, we are to climb 2n − more steps, and this can be done in 2na − ways. Therefore, we obtain the recurrence relation 12nn naa a−−=+ . Since the recurrence relation for na depends on two previous terms, we need two initial conditions. We have 1 1a = and 2 2a = . By direct computation, it is easy to obtain 10 89a = , thus solving part (a). How about part (b)? Finding 2004a does not seem to be easy. Direct computation is clearly not feasible, nor can we find the general term easily. We will come back to this later. Example 2.6. Canned soft drinks are arranged in layers of hexagonal arrays. The first layer has 1 can, the second layer has 7 cans, and so on, as shown in the figure below. 1 st layer 2nd layer 3 rd layer 4 th layer Mathematical Database Page 7 of 19 (a) How many cans are there in the 10th array? (b) How many cans are there in the 2004th array? (c) What is the total number of cans in the first 2004 arrays? Solution. Let na denote the number of cans in the n-th layer, and nb denote the total number of cans in the first n layers. Then the answers to (a), (b), (c) would be 10a , 2004a and 2004b respectively, and 12nnba a a=+ ++L . To find a recurrence relation for na , it is not difficult to observe that the ( 1)n + st layer has 6n more cans than the n-th layer, so that 1 6nnaa n+ =+ . With the initial condition 1 1a = , we have 2 16[1 2 ( 1)] (1) 16 2 33 1 nan nn nn = ++ + + − −⎡⎤ =+ ⎢⎥⎣⎦ =− + L so that the answers to part (a) and part (b) are respectively 2 10 3(10) 3(10) 1 271a =− + = and 23(2004) 3(2004) 1 12042037−+ = . How about nb ? By definition, we have 22 1 3(1 ) 3(1 ) (1 1)nnba a n n=++ = ++ − + + + ++LL L L . Since we know the formula 22 2 (1)(2 1) 12 6 nn n n + + ++ + =L , we can find nb in terms of n. Indeed, we find that 3(1)(2 1) ( 1) 33 62 n nn n n n bn n + ++ =⋅ − ⋅ + = , so that the answer to part (c) would be 3 2004 2004b = . The final result in the previous example may be surprising. Of course, a post-analysis of the problem would reveal that since 23 333 1 ( 1)nan n n n=− + = − − , that 3 nbn= should not come as a surprising fact. On the other hand, should we start by observing the values of nb for small n, then everything would be much simpler, for then we can compute na by the fact that 1nn nab b −=− . Example 2.7. For positive integer n, let 1 () ( ) 5 nnfn α β=− , Mathematical Database Page 8 of 19 where α and β (α β> ) are roots of the equation 2 10xx− −= . (a) Find α β+ , αβ , (1)f and (2)f . (b) Show that (2) ( ) ( 1)fn fn fn+= + + for all positive integers n. (c) Show that ()f n is an integer for all positive integers n. Solution. This is just a standard textbook question which should post no difficulty. (a) The value of α β+ is just the sum of roots of the equation 2 10xx− −= , which is 1. Similarly, αβ is the product of roots, which is –1. We also have 22 22 11 1 (1) ( ) ( ) 4 (1) 4( 1) 1 55 5 11 (2)( )( )( ) (1) ( ) 1 1 1 55 f ff αβ α β αβ αβ α β α β α β ⎡⎤= −= ⋅ + − = − − =⎣⎦ = −= − + = ⋅ + = × = (b) Since α and β are roots of the equation 2 10xx− −= , we have 2 10αα− −= , i.e. 2 1αα= + . Similarly, 2 1ββ=+ . Consequently, 22 22 11 5( 2) (1) ( 1) () ( ) 5( 1) 5( ) nn nn nn nn n n fn f nf n αβ αα β β αα β β α βα β ++ ++ ⋅+ = − =⋅ − ⋅ =+ −+ =− + − =⋅ + + ⋅ Dividing both sides by 5 , we get the desired result. (c) Since (1)f and (2)f are integers, and that ( 2) ( ) ( 1)fn fn fn+ =+ + , ( )f n is an integer for all positive integers n. What is the significance of the above example? In the previous example, we usually start with a sequence, then try to find a recurrence relation and then a general term. Here we start with a sequence defined by the general term, and then obtained a recurrence relation by some algebraic means. Incidentally, the ()f n here is precisely the na in Example 2.5. Therefore, the answer to part (b) in Example 2.5 would be 2004 2004 2004 11 5 1 5 (2004) 225 af ⎡ ⎤⎛⎞ ⎛ ⎞+− ⎢ ⎥== −⎜⎟ ⎜ ⎟⎜⎟ ⎜ ⎟⎢ ⎥⎝⎠ ⎝ ⎠⎣ ⎦ Mathematical Database Page 9 of 19 where the values of α and β are obtained by solving the equation 2 10xx− −= . This example gives us some inspiration on how to solve for the general term of a sequence when given a recurrence relation of the form 21nn napa qa++= + for constants p and q. We will explore this later. 3. Finding the General Term of a Sequence from the Recurrence Relation From the examples in the previous section, we see that it is desirable to know the general term of a sequence. This, in general, is not easy. Usually it is easier to observe a recurrence relation, and sometimes we can compute the general term using the recurrence relation, but sometimes this is not easy. It is the objective of this section to develop an efficient tool to complete this task. A. Initial Conditions From the examples in the previous section, we know that a recurrence relation alone is not enough to solve for the general term. We need some initial conditions. More precisely, with a different initial condition, we will have a different general term. For instance, in Example 2.1, if the original thickness of the piece of paper is 2 units instead of 1 unit, then the general term, as well as the answers to (a) and (b), will be doubled. How many initial conditions do we need? This depends on the recurrence relation. If the recurrence relation depends on only the previous term, then we need one initial condition, as in Examples 2.1, 2.2, 2.3, 2.4 and 2.6; if the recurrence relation depends on the previous two terms, then we need two initial conditions, as in Examples 2.5 and 2.7, and so on. B. The Method of Finite Difference When the general term is a polynomial, and we know the first few terms, then we can find the general term easily. Consider the following ‘numerical reasoning’ puzzle: 7, 8, 12, 19, 29, _____, … What should be the missing term? We note that this is an increasing sequence, and the differences between successive terms are 1, 4, 7 and 10. ‘Naturally’, the next difference would be 13, so the missing term is 42. Mathematical Database Page 10 of 19 Can we find the general term? We say that the next difference is ‘naturally’ 13, because then the ‘second level differences’ would be constantly equal to 3. This can be illustrated as follows: 7 8 12 19 29 14 7 10 33 3 After two levels of taking differences, we have reached a ‘finite difference’, which is constantly 3. What is the significance of this? If we regard this as a continuous function, say (1) 7f = , (2) 8f = , (3) 12f = and so on, taking difference would be like doing differentiation. If the function becomes constant after taking differences twice, it means that the second derivative of the function is constant, and hence the function must be a polynomial of degree 2. In this way, we would expect the general term of the above sequence to be of degree 2. Then we may let 2 naAn Bn C= ++ for some constants A, B and C. Using the fact that 1 7a = , 2 8a = and 3 12a = , we obtain 7 84 2 12 9 3 AB C AB C AB C =+ +⎧ ⎪ = ++⎨ ⎪ = ++⎩ Of course, this being a system of three linear equations in three unknowns, there should be no difficulty in solving for the values of A, B and C. It should be pointed out, however, that the easiest way to solve the system is to take successive differences (!!) of the equations. For instance, subtracting the first equation from the second and the second equation from the third, we obtain 13 45AB AB = +⎧ ⎨ = +⎩ Taking difference again, we have 32A= , so 3 2 A = . Backward substitution yields 7 2 B =− and C = 9. It follows that the general term for the sequence is 237 9 22 nan n= −+ . It is worth checking that this is indeed the general term. Of course we would expect this to hold for n = 1, 2, 3 since it is precisely their values from which we solved for the constants A, B and C. But how about n = 4, 5, 6, …? We leave it to the reader to explore. Mathematical Database Page 11 of 19 C. Special Tricks The method of finite difference only works when the general term is a polynomial. It does not apply when the general term is of other forms. For instance, if we try to apply the method to the sequence 1, 2, 4, 8, 16, 32, … , we will obtain 24 8 16 32 64 24 8 16 32 24 8 16 24 8 24 2 As we would expect, no finite difference is obtained. (What will happen if we regard the last ‘2’ as a finite difference and apply the method anyway?) We would need some other tricks. Of course, since the above sequence is a geometric sequence, finding the recurrence relation and the general term is of no difficulty. For a geometric sequence of first term a and common ratio R, we have the recurrence relation 1nnaRa+ = and 1n naaR −= . But how about the general case? Sometimes we can apply some ingenious tricks, as the following example shows. Example 3.1. The sequence 5, 11, 29, 83, 245, … is defined by the recurrence relation 1 34nnaa+ = − . Find its general term. Solution. We find that the method of finite difference does not work, and the sequence is not a geometric sequence. We need some other tricks. We present three different methods. Mathematical Database Page 12 of 19 Method 1 1 2 2 2 2 3 32 3 12 1 1 1 34 3(3 4) 4 34(1 3) 3(3 4) 4(1 3) 34(1 3 3 ) 34(1 3 3 ) 31 35 4 31 32 nn n n n n nn n n n aa a a a a a − − − − − −− − − =− =− − =− + =− − + =− + + = =− + + + − =⋅ − ⋅ − =+ L L Method 2 Let 1nn nba a+=− . Since 1 21 34 34 nn nn aa aa + ++ = −⎧ ⎨ = −⎩ we have, by subtracting the first equation from the second, 21 13( )nn n naa a a++ +− =− , i.e. 1 3nnbb+ = . Since 12 1 11 5 6ba a=− = − =, we have 163 23 nn nb −= ⋅= ⋅ . To find na , we use the telescoping trick as follows: 12 1 3 2 1 11 2 1 21 1 () ( ) ( ) 52 3 2 3 2 3 3(3 1) 52 31 32 nn n n n n n aa a a a a a a ab b b − − − − =+ − + − + + − =+ + + + =+ ⋅ + ⋅ + + ⋅ − =+ ⋅ − =+ L L L Method 3 Let nnac k=+ , where k is some ‘nice’ constant to be determined. Then the recurrence relation for na can now be written as 1 3( ) 4nnckc k+ += + − , or 1 3(2 4)nncc k+ = +− . We want to make nc a geometric sequence. That means we should choose 24 0k −= , i.e. k = 2. Then 1 3nncc+ = , and since 11 23ca=− =, we have 133 3 nn nc −= ⋅= . Of course 2 3 2 n nnac=+ = +. Mathematical Database Page 13 of 19 D. The Method of Characteristic Equations In Example 3.1 we came across some tricks to solve for the general term of a sequence. In each method we reduced the problem in some way to solving for the general term of a geometric sequence which is easy. This, in general, may not be possible, or is too complicated when the recurrence relation gets less simple. We therefore want a systematic way of solving for the general term. Here we will introduce the method of characteristic equations which enables us to solve for linear recurrence relations with constant coefficients. A linear recurrence relation with constant coefficients is a recurrence relation of the form 11 1 1 0 ()nk k n k n nap a p a p a f n+− + − +=+ + + +L where 0p , 1p , …, 1kp − are constants. For instance, the recurrence relation 1 34nnaa+ =− we came across in Example 3.1 is of this type. When ( ) 0fn = , the recurrence relation is said to be homogeneous. We illustrate the method of characteristic equations by the following example. Example 3.2. Solve the recurrence relation 2143nn naa a++=− subject to the initial conditions 1 1a = and 2 2a = . Solution. We first put side the initial conditions. In Example 3.1, we transformed the sequence into a geometric sequence. The general term is usually of a form similar to n naaR= . Here, suppose that the solution is of the form n na λ= . What can λ possibly be? We try to put n na λ= into the recurrence relation and obtain 2143 nn nλ λλ ++=− . After simplification, and ignoring the trivial case 0λ = , we obtain 2 43 0λλ− += . This is known as the characteristic equation for the recurrence relation. Solving, we get 1λ = or 3. Therefore, ignoring the initial condition, 3 n na = and 1na = are possible solution. It is then easy to see that for any constants A and B, 31 n naA B= ⋅+ ⋅ is also a possible solution without the initial conditions. Of course, with the two initial conditions, we can solve for A and B uniquely. In other words, we get a family of solutions satisfying the recurrence relation determined by the constants A and B, and each pair of two initial conditions would specify the values of A and B. In this case, putting n = 1, 2 we obtain Mathematical Database Page 14 of 19 1 2 13 23 AB AB ⎧ = ⋅+ ⎨ = ⋅+⎩ from which we get 1 6 A = and 1 2 B = , i.e. 111 3 1 31 62 2 n n na − + =⋅ + ⋅ = . In other words, when we come across a recurrence relation of the form 21nn napa qa++=+ , we simply solve the characteristic equation 2 p qλλ= + and then let the general term be nn naA Bα β=+ , where α and β are roots of the characteristic equation. The initial conditions would determine the values of the constants A and B. The method is the same if the recurrence relation has order higher than 2 (i.e. each term depends on more than just the previous two terms). We note, however, that if α β= , then we will not be able to solve for A and B. In that case we have to let nn naA Bnα β=+ and proceed as before. The case where α and β are not real will not be discussed here. How if () 0fn ≠ , i.e. the equation is non-homogeneous? In that case we first solve for the general solution of the homogeneous part 11 1 1 0nk k n k n nap a p a p a+− + − +=+ + +L , then find a particular solution for the original recurrence relation 11 1 1 0 ()nk k n k n nap a p a p a f n+− + − +=+ + + +L , add to the general solution of the homogeneous part. This is illustrated by the example below. Example 3.3. Solve the recurrence relations 2143 3 n nn naa a++=− + subject to the initial conditions 1 1a = and 2 3a = . Solution. We first solve the homogeneous part Mathematical Database Page 15 of 19 2143nn naa a++= − . By the result of Example 3.2, the general solution is 3 n naA B= ⋅+ for some constants A and B. Now we want to find a particular solution to the original (non- homogenous) recurrence relation. Since the non-homogenous part is 3 n , naturally we would try 3 n nak=⋅ for some constant k. However, since 3 n nak= ⋅ is a solution to the homogeneous part, we will not be able to find k (try it!). Therefore we consider 3 n nakn= ⋅ instead. Putting into the recurrence relation, we have 21(2) 3 4 ( 1)3 3 3 3 (9 18 )3 9 (12 1)3 6 nn n n nn kn kn kn kn k kn k k +++⋅ = + − ⋅ + += + + = Therefore, we have 36 3 nn naA B n= ⋅+ + ⋅ . Using the initial conditions, we obtain 44 3 A =− and 27B = , so 1 44 27 6 3 3 27 (18 44) 3 n n n an n − ⎛⎞ =+ −⎜⎟ ⎝⎠ = +− ⋅ 4. Further Examples In this section we look at various problems from mathematical competitions that involve sequences and recurrence relations. Example 4.1. Find the number of ways of arranging the numbers 1, 2, …, 2004 in a row such that except for the leftmost number, each number differs from some number on its left by 1. Solution. Let na denote the answer to the problem when 2004 is replaced by n. We first compute na for small n as follows: Mathematical Database Page 16 of 19 n Possible arrangement(s) na 1 1 1 2 12, 21 2 3 123, 213, 231, 321 4 4 1234, 2134, 2314, 2341, 3214, 3241, 3421, 4321 8 From the above table, we could guess that 12n na −= and hence the answer to the problem is 20032. (Of course to ‘play safe’ you may want to try one or two more cases.) With 1 1a = , to prove this rigorously all we need to do is to establish the recurrence relation 12nnaa −= . We observe that the rightmost number in a valid arrangement of n numbers must be 1 or n. We leave the proof of this observation as an exercise. Once this fact is established, the rest would follow easily. We proceed as follows. If the rightmost term is n, then it remains to arrange the numbers 1, 2, …, 1n − subject to the conditions. This can be done in 1na − ways. Similarly, if the rightmost term is 1, we have 1na − arrangements. As a result, we have 12nnaa −= , and so the answer to the problem is 2003 2004 2a = . Example 4.2. (IMO 2002 Hong Kong Preliminary Selection Contest) Find the number of 10-digit positive integers such that (a) each digit is either 1 or 2; and (b) there exist two consecutive 1’s. Solution. Let na be the answer to the problem when 10 is replaced by n. We try to find a recurrence relation for na . An n-digit number with the desired properties either starts with 11, 12 or 2. In the first case, there are 2 choices for each of the remaining 2n − digits, so there are a total of 22n− such numbers. In the second case, there must be two consecutive 1’s in the last 2n − digits and each digit is either 1 or 2. So there are 2na − such numbers. Similarly, there are 1na − numbers in the third case. Thus 2 12 2n nn naa a − −−=+ + . Now we need two initial conditions. We have 1 0a = and 2 1a = . Of course we can solve for the general term, but for our purpose it suffices to find 10a inductively. Using the recurrence relation and the initial conditions we have obtained, we easily get 10 880a = . Mathematical Database Page 17 of 19 Example 4.3. Find the unit digit of the number () ( ) 2004 2004 35 3 5++ − . Solution. We first note that the number is an integer; this can be seen by expanding both terms by the binomial theorem and we note that all radicals are cancelled. The form ()()35 3 5 nn na =+ + − looks very much like the general term of a sequence obtained from a recurrence relation. So we can try the reverse process and find a recurrence relation from the general term. Indeed, the equation with roots 35± is 2 64 0xx− += . Hence the recurrence relation should be 2164nn naa a++=− with the initial conditions 0 2a = and 1 6a = . Then we observe the unit digit of na for small n. Starting with n = 0, we find the pattern 2, 6, 8, 4, 2, 6, 8, 4, …, which is cyclic of period 4. Since 2004 0≡ (mod 4), the unit digit is the same as that of 0a , which is 2. Example 4.4. (China Hong Kong Mathematical Olympiad 2003) Let ABCDEF be a regular hexagon of side length 1, and O be the centre of the hexagon. In addition to the sides of the hexagon, line segments are drawn from O to each vertex, making a total of twelve unit line segments. Find the number of paths of length 2003 along these line segments that start at O and terminate at O. Solution. Let na denote the number of paths of length n from O to O; nb denote the number of paths of length n from A to O. Then we have the recurrence relations 1 11 6 2 nn nn n ab ba b − − − =⎧ ⎨ =+⎩ for natural numbers n. Upon substitution and simplification, we get 2126 0nn naa a++− −= . The characteristic equation is 2 26 0λλ−− = , with roots 17± . Hence ( ) ( )17 1 7 nn naA B=+ + − for some constants A and B. Using the initial conditions 0 1a = and 1 0a = , we have Mathematical Database Page 18 of 19 ()() 1 01 7 1 7 AB AB =+⎧⎪ ⎨ =+ + −⎪⎩ Solving, we obtain 77 14 A − = , 77 14 B + = . Hence ()( ) ( )( )77 1 7 7 7 1 7 14 nn na −+ + + − = . In particular, the answer is ()( ) ( )( ) 2003 2003 2003 77 1 7 7 7 1 7 14 a −+ + + − = . 5. Exercises 1. Use the method of finite difference to find the general term of the following sequences. (a) 1, 2, 7, 16, 29, 46, … (b) 1, 2, 15, 46, 101, 186, … (c) 1, 6, 42, 142, 351, 726, … 2. Find na in terms of n in each of the following cases. (a) 2144nn naa a++=− , 1 1a = , 2 2a = (b) 2143 3nn naa a++=− + , 1 1a = , 2 2a = (c) 2144 2n nn naa a++=− + , 1 1a = , 2 2a = 3. Prove the observation in Example 4.1. 4. Find the number of 10-digit positive integers such that (a) each digit is either 1 or 2; and (b) there do not exist two consecutive 1’s. Mathematical Database Page 19 of 19 5. Let n be a positive integer. Find, in terms of n, the number of ways in which a 2 n× rectangle can be partitioned into 12× triangles. 6. In the decimal representation of the number ( ) 2003 35+ , what is the digit immediately to the right of the decimal point? 7. Find all functions f from the positive real numbers to itself such that (( )) 6 ( )f fx x f x=− for all positive real numbers x. 8. (IMO 1979) Let A and E be opposite vertices of a regular octagon. A frog starts jumping at vertex A. From any vertex of the octagon except E, it may jump to either of the two adjacent vertices. When it reaches vertex E, the frog stops and stays there. Let na be the number of distinct paths of exactly n jumps ending at E. Prove that 21 0na − = and () ( ) 11 2 1 22 2 2 2 nn na −−⎡⎤=+ − − ⎢⎥⎣⎦ for n = 1, 2, 3, …","libVersion":"0.3.1","langs":""}